# Project Structure

PhotoPrism follows a Go-style monorepo layout with distinct roots for Go packages, the Vue/Vuetify frontend, assets, tooling, and Docker resources. The table below captures the major directories. Use [`CODEMAP.md`](https://github.com/photoprism/photoprism/blob/develop/CODEMAP.md) in the main repository for an exhaustive, always-up-to-date map.

| Path                        | Purpose & Key Files                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|-----------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `/`                         | Top-level Makefile targets (`make build-go`, `make watch-js`, `make test`), multi-arch Docker Compose files, project metadata ([`README.md`](https://github.com/photoprism/photoprism/blob/develop/README.md), [`LICENSE`](https://github.com/photoprism/photoprism/blob/develop/LICENSE), [`AGENTS.md`](https://github.com/photoprism/photoprism/blob/develop/AGENTS.md), [`CONTRIBUTING.md`](https://github.com/photoprism/photoprism/blob/develop/CONTRIBUTING.md)). Running `./photoprism` expects you to be at this root.                                                                                                                       |
| `/cmd`                      | Entry points for compiled binaries. The CLI/server lives in [`cmd/photoprism/photoprism.go`](https://github.com/photoprism/photoprism/blob/develop/cmd/photoprism/photoprism.go); any new executable should sit under `cmd/<name>`.                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `/internal`                 | Private Go packages (configuration, CLI commands, server, entity models, AI, workers, auth, services). Never import these from external modules. Highlights: [`internal/commands`](https://github.com/photoprism/photoprism/tree/develop/internal/commands), [`internal/server`](https://github.com/photoprism/photoprism/tree/develop/internal/server), [`internal/config`](https://github.com/photoprism/photoprism/tree/develop/internal/config), [`internal/entity`](https://github.com/photoprism/photoprism/tree/develop/internal/entity), [`internal/photoprism`](https://github.com/photoprism/photoprism/tree/develop/internal/photoprism). |
| `/pkg`                      | Public Go helpers reusable outside the repo ([`pkg/clean`](https://github.com/photoprism/photoprism/tree/develop/pkg/clean), [`pkg/fs`](https://github.com/photoprism/photoprism/tree/develop/pkg/fs), [`pkg/txt`](https://github.com/photoprism/photoprism/tree/develop/pkg/txt), [`pkg/enum`](https://github.com/photoprism/photoprism/tree/develop/pkg/enum)). These packages must not depend on anything in `/internal`.                                                                                                                                                                                                                         |
| `/frontend`                 | Vue 3 + Vuetify 3 SPA. `src/` holds components, routes, models, CSS; `package.json` and `webpack.config.js` define build tooling. Frontend CODEMAP lives in [`frontend/CODEMAP.md`](https://github.com/photoprism/photoprism/blob/develop/frontend/CODEMAP.md).                                                                                                                                                                                                                                                                                                                                                                                      |
| `/assets`                   | HTML templates ([`assets/templates/index.gohtml`](https://github.com/photoprism/photoprism/blob/develop/assets/templates/index.gohtml)), static JS ([`assets/static/js/browser-check.js`](https://github.com/photoprism/photoprism/blob/develop/assets/static/js/browser-check.js)), images, and TensorFlow models.                                                                                                                                                                                                                                                                                                                                  |
| `/docker`                   | Dockerfiles and assets for specialized images (TensorFlow, GPU, ARM). The development stack uses the top-level `compose*.yaml` files.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `/scripts`                  | Bash helpers for CI, release automation, DB initialization. Examples: [`scripts/*.sh`](https://github.com/photoprism/photoprism/tree/develop/scripts), [`scripts/dist/*.sh`](https://github.com/photoprism/photoprism/tree/develop/scripts/dist).                                                                                                                                                                                                                                                                                                                                                                                                    |
| `/build`, `/bin`            | Build artifacts and downloaded tools (golangci-lint, swagger). Should remain untracked or auto-cleaned via Make targets.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `/storage`                  | Runtime data when developing locally (SQLite DB, search index, cache, YAML backups). In Docker, this path is mounted from the host.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `/test`, `/setup`, `/specs` | Integration test data, sample configuration files, internal specs used in QA and CI pipelines.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |

## Tips for Contributors

- When adding a new Go package, decide whether it belongs under `/internal` (private app logic) or `/pkg` (reusable helper). Only `/pkg` packages can be imported by external modules.
- Keep [`CODEMAP.md`](https://github.com/photoprism/photoprism/blob/develop/CODEMAP.md) in sync whenever you move directories or introduce major subsystems.
- Remember to update frontend builds (`make build-js`) if you touch Vue/JS/CSS files.
